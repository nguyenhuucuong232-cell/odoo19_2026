<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Email Template: Đề nghị Tạm ứng được gửi -->
        <record id="email_template_advance_submitted" model="mail.template">
            <field name="name">SGC: Đề nghị Tạm ứng - Chờ duyệt</field>
            <field name="model_id" ref="model_sgc_expense_advance"/>
            <field name="subject">Đề nghị Tạm ứng {{ object.name }} - Chờ duyệt L1</field>
            <field name="email_from">{{ (object.employee_id.work_email or user.email_formatted) }}</field>
            <field name="email_to">{{ object.employee_id.parent_id.work_email or '' }}</field>
            <field name="body_html" type="html">
<div style="font-family: Arial, sans-serif; font-size: 14px; color: #333;">
    <h2 style="color: #875A7B;">Đề nghị Tạm ứng mới</h2>
    <p>Xin chào,</p>
    <p>Nhân viên <strong>{{ object.employee_id.name }}</strong> đã gửi đề nghị tạm ứng:</p>
    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Mã đề nghị:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ object.name }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Số tiền:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ format_amount(object.amount, object.currency_id) }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Lý do:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ object.reason }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Dự án:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ object.project_id.name or 'N/A' }}</td>
        </tr>
    </table>
    <p>Vui lòng đăng nhập vào hệ thống để xem chi tiết và phê duyệt.</p>
    <p style="margin-top: 20px;">
        <a href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=sgc.expense.advance&amp;view_type=form" 
           style="background-color: #875A7B; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
            Xem đề nghị
        </a>
    </p>
    <p style="margin-top: 30px; color: #888; font-size: 12px;">
        Email này được gửi tự động từ hệ thống SGC Management.
    </p>
</div>
            </field>
        </record>

        <!-- Email Template: Đề nghị được duyệt L1 -->
        <record id="email_template_advance_approved_l1" model="mail.template">
            <field name="name">SGC: Đề nghị Tạm ứng - Đã duyệt L1</field>
            <field name="model_id" ref="model_sgc_expense_advance"/>
            <field name="subject">Đề nghị Tạm ứng {{ object.name }} - Chờ duyệt L2</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="email_to">{{ object.employee_id.parent_id.parent_id.work_email or '' }}</field>
            <field name="body_html" type="html">
<div style="font-family: Arial, sans-serif; font-size: 14px; color: #333;">
    <h2 style="color: #875A7B;">Đề nghị Tạm ứng đã được duyệt L1</h2>
    <p>Xin chào,</p>
    <p>Đề nghị tạm ứng <strong>{{ object.name }}</strong> của nhân viên <strong>{{ object.employee_id.name }}</strong> đã được Trưởng nhóm phê duyệt.</p>
    <p>Vui lòng xem xét và phê duyệt cấp 2.</p>
    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Số tiền:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ format_amount(object.amount, object.currency_id) }}</td>
        </tr>
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Dự án:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd;">{{ object.project_id.name or 'N/A' }}</td>
        </tr>
    </table>
    <p style="margin-top: 20px;">
        <a href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=sgc.expense.advance&amp;view_type=form" 
           style="background-color: #875A7B; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
            Xem đề nghị
        </a>
    </p>
</div>
            </field>
        </record>

        <!-- Email Template: Đề nghị được duyệt L2 -->
        <record id="email_template_advance_approved_l2" model="mail.template">
            <field name="name">SGC: Đề nghị Tạm ứng - Đã duyệt L2</field>
            <field name="model_id" ref="model_sgc_expense_advance"/>
            <field name="subject">Đề nghị Tạm ứng {{ object.name }} - Đã được phê duyệt</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="email_to">{{ object.employee_id.work_email or '' }}</field>
            <field name="body_html" type="html">
<div style="font-family: Arial, sans-serif; font-size: 14px; color: #333;">
    <h2 style="color: #28a745;">✓ Đề nghị Tạm ứng đã được phê duyệt</h2>
    <p>Xin chào <strong>{{ object.employee_id.name }}</strong>,</p>
    <p>Đề nghị tạm ứng <strong>{{ object.name }}</strong> của bạn đã được phê duyệt.</p>
    <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
        <tr>
            <td style="padding: 8px; border: 1px solid #ddd;"><strong>Số tiền được duyệt:</strong></td>
            <td style="padding: 8px; border: 1px solid #ddd; color: #28a745; font-size: 18px;">
                <strong>{{ format_amount(object.amount, object.currency_id) }}</strong>
            </td>
        </tr>
    </table>
    <p>Vui lòng liên hệ Phòng Kế toán để nhận tiền tạm ứng.</p>
    <p style="margin-top: 20px;">
        <a href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=sgc.expense.advance&amp;view_type=form" 
           style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
            Xem chi tiết
        </a>
    </p>
</div>
            </field>
        </record>

        <!-- Email Template: Đề nghị bị từ chối -->
        <record id="email_template_advance_refused" model="mail.template">
            <field name="name">SGC: Đề nghị Tạm ứng - Bị từ chối</field>
            <field name="model_id" ref="model_sgc_expense_advance"/>
            <field name="subject">Đề nghị Tạm ứng {{ object.name }} - Bị từ chối</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="email_to">{{ object.employee_id.work_email or '' }}</field>
            <field name="body_html" type="html">
<div style="font-family: Arial, sans-serif; font-size: 14px; color: #333;">
    <h2 style="color: #dc3545;">✗ Đề nghị Tạm ứng bị từ chối</h2>
    <p>Xin chào <strong>{{ object.employee_id.name }}</strong>,</p>
    <p>Đề nghị tạm ứng <strong>{{ object.name }}</strong> của bạn đã bị từ chối.</p>
    <p>Vui lòng kiểm tra lại thông tin hoặc liên hệ với người quản lý để biết thêm chi tiết.</p>
    <p style="margin-top: 20px;">
        <a href="{{ object.get_base_url() }}/web#id={{ object.id }}&amp;model=sgc.expense.advance&amp;view_type=form" 
           style="background-color: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
            Xem chi tiết
        </a>
    </p>
</div>
            </field>
        </record>

    </data>
</odoo>
